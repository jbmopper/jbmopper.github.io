---
import BaseLayout from "../../../layouts/BaseLayout.astro";
import {dlfSections} from "../../../config/deep-learning-fundamentals-sections";

const showDevRoutes = import.meta.env.DEV;
let NotebookWriteup = null;

try {
  NotebookWriteup = (await import("../../../generated/deep-learning-fundamentals.md")).default;
} catch {
  NotebookWriteup = null;
}
---

<BaseLayout
  title="Deep Learning Fundamentals | jbmopper.github.io"
  description="Transformer implementation, profiling, and benchmark analysis"
>
  <article class="project-root">
    <header class="panel">
      <p class="eyebrow">Project</p>
      <h1>Large Language Models and Deep Learning Fundamentals</h1>
      <p>
        This Astro route mirrors the exported notebook writeup while preserving stable section routes for
        interactive technical views.
      </p>
      <nav>
        <a href="/">Back home</a>
        {showDevRoutes && <a href="/observable/index.html">Observable sandbox</a>}
        {showDevRoutes && <a href="/projects/deep-learning-fundamentals/notes/">Notes route</a>}
      </nav>
    </header>

    <section class="panel">
      <h2>Project Overview</h2>
      <p>Each section below has its own Astro route and mounts exactly one exported Observable module.</p>
      <ol class="toc-list">
        {
          dlfSections.map((section) => (
            <li>
              <a href={`/projects/deep-learning-fundamentals/${section.slug}/`}>{section.title}</a>
              <p>{section.description}</p>
            </li>
          ))
        }
      </ol>
    </section>

    <section class="panel">
      <h2>Notebook Writeup</h2>
      <p>
        Source of truth: <code>ns_obv/src/llm-fundamentals/index.md</code>. Run <code>npm run export:astro</code> in
        <code>ns_obv</code> to refresh this content.
      </p>
      {
        NotebookWriteup ? (
          <div class="writeup">
            <NotebookWriteup />
          </div>
        ) : (
          <p class="missing-writeup">
            Notebook markdown has not been synced yet. Run <code>npm run export:astro</code> in
            <code> /Users/juliusmopper/Dev/ns_obv</code> and restart Astro dev.
          </p>
        )
      }
    </section>
  </article>
</BaseLayout>

<style>
  .project-root {
    display: grid;
    gap: 1rem;
  }

  .panel {
    border: 1px solid var(--stroke);
    border-radius: 14px;
    padding: 1.1rem;
    background: color-mix(in srgb, var(--surface) 82%, transparent);
  }

  .eyebrow {
    margin: 0;
    color: var(--accent);
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
  }

  h1 {
    margin: 0.4rem 0 0.75rem;
    font-size: clamp(1.7rem, 3vw, 2.5rem);
  }

  p {
    color: var(--text-1);
  }

  nav {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
  }

  nav a {
    color: var(--text-0);
    text-decoration: none;
    border: 1px solid var(--stroke);
    border-radius: 999px;
    padding: 0.4rem 0.8rem;
  }

  nav a:hover {
    border-color: var(--accent);
  }

  section h2 {
    margin: 0 0 0.6rem;
  }

  section p {
    margin-top: 0;
  }

  .toc-list {
    margin: 0;
    padding-left: 1.25rem;
    display: grid;
    gap: 0.85rem;
  }

  .toc-list a {
    color: var(--accent);
  }

  .toc-list p {
    margin: 0.35rem 0 0;
    color: var(--text-1);
  }

  .missing-writeup {
    margin: 0;
    border: 1px dashed var(--stroke);
    border-radius: 10px;
    padding: 0.75rem;
  }

  .writeup {
    margin-top: 0.8rem;
  }

  .writeup :global(h1) {
    margin: 0.2rem 0 1rem;
    font-size: clamp(1.5rem, 2.5vw, 2.1rem);
  }

  .writeup :global(h2) {
    margin: 1.4rem 0 0.65rem;
    font-size: 1.25rem;
  }

  .writeup :global(h3) {
    margin: 1rem 0 0.5rem;
    font-size: 1.06rem;
  }

  .writeup :global(p),
  .writeup :global(li) {
    line-height: 1.65;
    max-width: 74ch;
  }

  .writeup :global(ul),
  .writeup :global(ol) {
    margin: 0.35rem 0 0.9rem 1.25rem;
  }

  .writeup :global(hr) {
    border: 0;
    border-top: 1px solid var(--stroke);
    margin: 1.2rem 0;
  }
</style>
