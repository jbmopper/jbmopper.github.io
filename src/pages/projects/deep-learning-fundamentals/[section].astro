---
import BaseLayout from "../../../layouts/BaseLayout.astro";
import ObservableEmbed from "../../../components/ObservableEmbed.astro";
import {dlfSections, type DlfSection} from "../../../config/deep-learning-fundamentals-sections";

const showDevRoutes = import.meta.env.DEV;

export function getStaticPaths() {
  return dlfSections.map((section) => ({
    params: {section: section.slug},
    props: {section}
  }));
}

const {section} = Astro.props as {section: DlfSection};
---

<BaseLayout title={`${section.title} | Deep Learning Fundamentals`}>
  <article class="project-root">
    <header class="panel">
      <p class="eyebrow">Deep Learning Fundamentals</p>
      <h1>{section.title}</h1>
      <p>{section.description}</p>
      <nav>
        <a href="/projects/deep-learning-fundamentals/">Back to overview</a>
        {showDevRoutes && <a href="/observable/">Observable sandbox</a>}
        {showDevRoutes && <a href="/projects/deep-learning-fundamentals/notes/">Notes route</a>}
      </nav>
    </header>

    <section class="panel">
      <ObservableEmbed modulePath={section.modulePath} exportName={section.exportName} options={section.options} />
    </section>
  </article>
</BaseLayout>

<style>
  .project-root {
    display: grid;
    gap: 1rem;
  }

  .panel {
    border: 1px solid var(--stroke);
    border-radius: 14px;
    padding: 1.1rem;
    background: color-mix(in srgb, var(--surface) 82%, transparent);
  }

  .eyebrow {
    margin: 0;
    color: var(--accent);
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
  }

  h1 {
    margin: 0.4rem 0 0.75rem;
    font-size: clamp(1.7rem, 3vw, 2.5rem);
  }

  p {
    color: var(--text-1);
  }

  nav {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
  }

  nav a {
    color: var(--text-0);
    text-decoration: none;
    border: 1px solid var(--stroke);
    border-radius: 999px;
    padding: 0.4rem 0.8rem;
  }

  nav a:hover {
    border-color: var(--accent);
  }
</style>
